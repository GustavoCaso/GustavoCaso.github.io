<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=dark data-auto-appearance=true><head><meta charset=utf-8><meta http-equiv=content-language content="en"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><title>Functional programming aspects of the Ruby language &#183; Gustavo Caso</title><meta name=title content="Functional programming aspects of the Ruby language &#183; Gustavo Caso"><meta name=keywords content="ruby, functional programming,"><link rel=canonical href=https://www.gustavocaso.dev/posts/functional-programming-aspects-of-the-ruby-language/><link type=text/css rel=stylesheet href=/css/main.bundle.min.c6116b9ed1c907a8c0eb015f377d3eecc07e448d75729e31fc3de5881465c6c172ba9fa9a6800c030116caf2a110d92242bb816639484ca791f7cd107a8d49b5.css integrity="sha512-xhFrntHJB6jA6wFfN30+7MB+RI11cp4x/D3liBRlxsFyup+ppoAMAwEWyvKhENkiQruBZjlITKeR980Qeo1JtQ=="><script type=text/javascript src=/js/appearance.min.0c2efa25b877bbb1cbe22c984957864f28de3072dda887632dd30d5e82bedd61a9cc3e2e996c81d9da4acbee3d4aee6b45d4a339fa66ee22f518123eb89a1b2a.js integrity="sha512-DC76Jbh3u7HL4iyYSVeGTyjeMHLdqIdjLdMNXoK+3WGpzD4umWyB2dpKy+49Su5rRdSjOfpm7iL1GBI+uJobKg=="></script>
<script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.911bd9741247c092f3a38757ca26b07e6bf319209e5162bbc5a609bae50fa2ea13b3c09f8f2c3d1cfd66c0b6885f0b2137bb43fee6404db177d90abde3c09547.js integrity="sha512-kRvZdBJHwJLzo4dXyiawfmvzGSCeUWK7xaYJuuUPouoTs8Cfjyw9HP1mwLaIXwshN7tD/uZATbF32Qq948CVRw==" data-copy data-copied></script>
<script src=/js/zoom.min.js></script>
<link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta property="og:title" content="Functional programming aspects of the Ruby language"><meta property="og:description" content="Revised by Andy Holland
Lately, there has been a significant change in the industry towards functional programming, new languages have appeared: Elixir, Scala, Elm.
With all this new hype I decided to give a try to some of them, and I have to say that they are really cool, but wether I like it at work I mostly use ruby."><meta property="og:type" content="article"><meta property="og:url" content="https://www.gustavocaso.dev/posts/functional-programming-aspects-of-the-ruby-language/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2017-11-03T00:00:00+00:00"><meta property="article:modified_time" content="2017-11-03T00:00:00+00:00"><meta property="og:site_name" content="Gustavo Caso"><meta name=twitter:card content="summary"><meta name=twitter:title content="Functional programming aspects of the Ruby language"><meta name=twitter:description content="Revised by Andy Holland
Lately, there has been a significant change in the industry towards functional programming, new languages have appeared: Elixir, Scala, Elm.
With all this new hype I decided to give a try to some of them, and I have to say that they are really cool, but wether I like it at work I mostly use ruby."><script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"Posts","name":"Functional programming aspects of the Ruby language","headline":"Functional programming aspects of the Ruby language","abstract":"Revised by Andy Holland\nLately, there has been a significant change in the industry towards functional programming, new languages have appeared: Elixir, Scala, Elm.\nWith all this new hype I decided to give a try to some of them, and I have to say that they are really cool, but wether I like it at work I mostly use ruby.","inLanguage":"en","url":"https:\/\/www.gustavocaso.dev\/posts\/functional-programming-aspects-of-the-ruby-language\/","author":{"@type":"Person","name":"Gustavo Caso"},"copyrightYear":"2017","dateCreated":"2017-11-03T00:00:00\u002b00:00","datePublished":"2017-11-03T00:00:00\u002b00:00","dateModified":"2017-11-03T00:00:00\u002b00:00","keywords":["ruby"," functional programming"],"mainEntityOfPage":"true","wordCount":"1100"}]</script><meta name=author content="Gustavo Caso"><link href=mailto:gustavocaso@gmail.com rel=me><link href=https://github.com/GustavoCaso rel=me><link href=https://www.linkedin.com/in/gustavocaso/ rel=me><script src=/lib/jquery/jquery.slim.min.js integrity></script><meta name=theme-color></head><body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>Skip to main content</a></div><div style=padding-left:0;padding-right:0;padding-top:2px;padding-bottom:3px class="main-menu flex items-center justify-between px-4 py-6 sm:px-6 md:justify-start space-x-3"><div class="flex flex-1 items-center justify-between"><nav class="flex space-x-3"><a href=/ class="text-base font-medium text-gray-500 hover:text-gray-900">Gustavo Caso</a></nav><nav class="hidden md:flex items-center space-x-5 md:ml-12"><a href=/posts/ class="flex items-center"><p class="text-base font-medium text-gray-500 hover:text-gray-900" title=Posts>Posts</p></a><a href=/tags/ class="flex items-center"><p class="text-base font-medium text-gray-500 hover:text-gray-900" title=Tags>Tags</p></a></nav><div class="flex md:hidden items-center space-x-5 md:ml-12"><span></span></div></div><div class="-my-2 -mr-2 md:hidden"><label id=menu-button for=menu-controller class=block><input type=checkbox id=menu-controller class=hidden><div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M0 96C0 78.33 14.33 64 32 64H416c17.7.0 32 14.33 32 32 0 17.7-14.3 32-32 32H32C14.33 128 0 113.7.0 96zM0 256c0-17.7 14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32H32c-17.67.0-32-14.3-32-32zM416 448H32c-17.67.0-32-14.3-32-32s14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32z"/></svg></span></div><div id=menu-wrapper style=padding-top:5px class="fixed inset-0 z-30 invisible w-screen h-screen m-auto overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50"><ul class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none ltr:text-right rtl:text-left max-w-7xl"><li><span class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></span></li><li class=mt-1><a href=/posts/ class="flex items-center"><p class="text-bg font-bg text-gray-500 hover:text-gray-900" title=Posts>Posts</p></a></li><li class=mt-1><a href=/tags/ class="flex items-center"><p class="text-bg font-bg text-gray-500 hover:text-gray-900" title=Tags>Tags</p></a></li></ul></div></label></div></div><div class="relative flex flex-col grow"><main id=main-content class=grow><article><header id=single_header class="mt-5 max-w-prose"><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">Functional programming aspects of the Ruby language</h1><div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><time datetime="2017-11-03 00:00:00 +0000 UTC">3 November 2017</time><span class="px-2 text-primary-500">&#183;</span><span>1100 words</span><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">6 mins</span></div><div class="flex flex-row flex-wrap items-center"><span style=margin-top:.5rem class=mr-2 onclick='window.open("/tags/ruby/","_self")'><span class=flex><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">ruby</span></span></span>
<span style=margin-top:.5rem class=mr-2 onclick='window.open("/tags/functional-programming/","_self")'><span class=flex><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">functional programming</span></span></span></div></div></header><section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row"><div class="order-first sm:max-w-prose lg:ml-auto px-0 lg:order-last lg:max-w-xs ltr:lg:pl-8 rtl:lg:pr-8"><div class="toc ltr:pl-5 rtl:pr-5 print:hidden lg:sticky lg:top-10"><details open class="mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 hidden lg:block"><summary class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="min-w-[220px] py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><ul><li><a href=#higher-order-functions>Higher-order functions</a></li><li><a href=#first-class-functions-and-support-for-lambdas>First Class Functions and Support for Lambdas</a></li><li><a href=#currying>Currying</a></li><li><a href=#lazy-evaluation>Lazy evaluation</a></li><li><a href=#type-system>Type system</a></li><li><a href=#pure-functions>Pure functions</a></li></ul></li></ul></nav></div></details><details class="mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 lg:hidden"><summary class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><ul><li><a href=#higher-order-functions>Higher-order functions</a></li><li><a href=#first-class-functions-and-support-for-lambdas>First Class Functions and Support for Lambdas</a></li><li><a href=#currying>Currying</a></li><li><a href=#lazy-evaluation>Lazy evaluation</a></li><li><a href=#type-system>Type system</a></li><li><a href=#pure-functions>Pure functions</a></li></ul></li></ul></nav></div></details></div></div><div class="min-w-0 min-h-0 max-w-prose"><p><strong>Revised by Andy Holland</strong></p><p>Lately, there has been a significant change in the industry towards functional programming, new languages have appeared: Elixir, Scala, Elm.</p><p>With all this new hype I decided to give a try to some of them, and I have to say that they are really cool, but wether I like it at work I mostly use ruby. Not that I complain or anything but is exciting to be able to play with the new kid on the block.</p><p>After some time playing with a new functional programming languages, I have noticed that Ruby has some similarities with them.</p><p>I&rsquo;m not going to say that ruby is a FP language nor that Matz the creator is incorrect.</p><p>To quote Matz words from an <a href=http://www.linuxdevcenter.com/pub/a/linux/2001/11/29/ruby.html target=_blank>interview</a> with O&rsquo;Reilly.</p><blockquote><p>I wanted a scripting language that was more powerful than Perl, and more object-oriented than Python.</p></blockquote><p>So Ruby is an object-oriented language - that&rsquo;s is for sure - but I wanted to share my idea that ruby is a multipurpose language.</p><p>According to <a href=https://en.wikipedia.org/wiki/Functional_programming target=_blank>Wikipedia</a> for a programming language to be considered Functional it needs to have:</p><ul><li>First-class and higher-order functions</li><li>Pure functions</li><li>Recursion</li><li>Strict versus non-strict evaluation</li><li>Type systems</li><li>Currying</li><li>Lazy Evaluation</li></ul><p>We are going to explore some of the concepts with Ruby ðŸ’Ž</p><div id=higher-order-functions class=anchor></div><h3 class="relative group">Higher-order functions
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#higher-order-functions aria-label=Anchor>#</a></span></h3><ul><li>takes one or more functions as arguments</li><li>returns a function as its result</li></ul><p>In ruby, there are examples everywhere which show that ruby has support for Higher-order functions.</p><p>Let&rsquo;s look at a well-known ruby method <code>each</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ruby data-lang=ruby><span class=line><span class=cl><span class=o>[</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=o>].</span><span class=n>each</span> <span class=p>{</span> <span class=o>|</span><span class=n>x</span><span class=o>|</span>  <span class=nb>puts</span> <span class=n>x</span><span class=o>*</span><span class=n>x</span> <span class=p>}</span> <span class=c1>#=&gt; [1,4,9,16]</span>
</span></span></code></pre></div><p>We can consider the block as passing a function as argument</p><p>To make the case more clear, you can write the same example using lambdas.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ruby data-lang=ruby><span class=line><span class=cl><span class=n>square</span> <span class=o>=</span> <span class=o>-&gt;</span> <span class=p>{</span> <span class=o>|</span><span class=n>x</span><span class=o>|</span> <span class=nb>puts</span> <span class=n>x</span><span class=o>*</span><span class=n>x</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=o>[</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=o>].</span><span class=n>each</span><span class=p>(</span><span class=o>&amp;</span><span class=n>square</span><span class=p>)</span> <span class=c1>#=&gt; [1,4,9,16]</span>
</span></span></code></pre></div><p>Many of ruby-core methods take a block or function as argument <code>each</code>, <code>map</code>, <code>select</code>.</p><p>As for functions that return other functions as not that common in ruby but doesn&rsquo;t mean we can&rsquo;t do it.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ruby data-lang=ruby><span class=line><span class=cl><span class=k>def</span> <span class=nf>adder</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=nb>lambda</span> <span class=p>{</span> <span class=n>a</span> <span class=o>+</span> <span class=n>b</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>adder_fn</span> <span class=o>=</span> <span class=n>adder</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>adder_fn</span><span class=o>.</span><span class=n>call</span> <span class=c1># =&gt; 3</span>
</span></span></code></pre></div><div id=first-class-functions-and-support-for-lambdas class=anchor></div><h3 class="relative group">First Class Functions and Support for Lambdas
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#first-class-functions-and-support-for-lambdas aria-label=Anchor>#</a></span></h3><p>Ruby has support for multiple types of functions; lambdas and procs, there are shuttle differences between them, and we will need a whole post about it, but instead, there are many significant resources out there explaining the differences <a href=http://awaxman11.github.io/blog/2013/08/05/what-is-the-difference-between-a-block/ target=_blank>articles</a>.
How I like to think about them is as functions that can you stored in variables:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ruby data-lang=ruby><span class=line><span class=cl><span class=n>add</span> <span class=o>=</span> <span class=o>-&gt;</span> <span class=p>(</span><span class=n>x</span><span class=p>,</span><span class=n>y</span><span class=p>)</span> <span class=p>{</span> <span class=n>x</span> <span class=o>+</span> <span class=n>y</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>multiply</span> <span class=o>=</span> <span class=o>-&gt;</span> <span class=p>(</span><span class=n>x</span><span class=p>,</span><span class=n>y</span><span class=p>)</span> <span class=p>{</span> <span class=n>x</span> <span class=o>*</span> <span class=n>y</span> <span class=p>}</span>
</span></span></code></pre></div><p>One interesting pattern is the policy pattern that allows you to have a function execute the same tasks but depending on the business logic the callbacks for success or failure can be configured:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ruby data-lang=ruby><span class=line><span class=cl><span class=k>def</span> <span class=nf>create_record</span><span class=p>(</span><span class=n>attributes</span><span class=p>,</span> <span class=n>success_policy</span><span class=p>,</span> <span class=n>failure_policy</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=no>Record</span><span class=o>.</span><span class=n>create</span><span class=p>(</span><span class=n>attributes</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>success_policy</span><span class=o>.</span><span class=n>call</span>
</span></span><span class=line><span class=cl>  <span class=k>else</span>
</span></span><span class=line><span class=cl>    <span class=n>failure_policy</span><span class=o>.</span><span class=n>call</span>
</span></span><span class=line><span class=cl>  <span class=k>end</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>success_policy</span> <span class=o>=</span> <span class=o>-&gt;</span> <span class=p>()</span> <span class=p>{</span> <span class=n>send_email</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>failure_policy</span> <span class=o>=</span> <span class=o>-&gt;</span> <span class=p>()</span> <span class=p>{</span> <span class=nb>puts</span> <span class=s1>&#39;something went wrong&#39;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>create_record</span><span class=p>({</span><span class=nb>name</span><span class=p>:</span> <span class=s1>&#39;John&#39;</span><span class=p>},</span> <span class=n>succes_policy</span><span class=p>,</span> <span class=n>failure_policy</span><span class=p>)</span>
</span></span></code></pre></div><p>One thing that is not that common in ruby is storing method inside variables, using the method <code>method</code>, we can store them and pass it to functions as if it were a proc or a lambda.</p><p>There is an excellent video from <a href=https://www.rubytapas.com/2012/10/17/episode-011-method-and-message/ target=_blank>RubyTapas</a> that cover this topic very well.</p><p>For now, I let you a small example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ruby data-lang=ruby><span class=line><span class=cl><span class=k>def</span> <span class=nf>hello</span>
</span></span><span class=line><span class=cl>  <span class=k>yield</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>hi</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;hi there.&#34;</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>hello</span> <span class=o>&amp;</span><span class=nb>method</span><span class=p>(</span><span class=ss>:hi</span><span class=p>)</span>
</span></span></code></pre></div><div id=currying class=anchor></div><h3 class="relative group">Currying
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#currying aria-label=Anchor>#</a></span></h3><p>Currying means to partially apply a function, here are a couple of definitions:</p><ul><li>Partial function application is calling a function with some number of arguments, to get a function back that will take that many fewer arguments.</li><li>Currying is taking a function that takes n arguments, and splitting it into n functions that take one argument.</li></ul><p>In ruby land; is not very common to use this technique, but this allows us to have small and reusable functions that can be easy to use and understood while you read your code.</p><p>Since Ruby 1.9, the Proc class have the method: <code>#curry</code>, that allow us to implement both options.</p><p>Let&rsquo;s see some examples.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ruby data-lang=ruby><span class=line><span class=cl><span class=n>db_operation</span> <span class=o>=</span> <span class=nb>lambda</span> <span class=k>do</span> <span class=o>|</span><span class=n>db_adapter</span><span class=p>,</span> <span class=n>operation</span><span class=p>,</span> <span class=n>record</span><span class=o>|</span>
</span></span><span class=line><span class=cl>  <span class=n>db_adapter</span><span class=o>.</span><span class=n>send</span><span class=p>(</span><span class=n>operation</span><span class=p>,</span> <span class=n>record</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>create_db_operation</span> <span class=o>=</span> <span class=n>db_operation</span><span class=o>.</span><span class=n>curry</span><span class=p>(</span><span class=no>DB</span><span class=p>,</span> <span class=ss>:create</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>delete_db_operation</span> <span class=o>=</span> <span class=n>db_operation</span><span class=o>.</span><span class=n>curry</span><span class=p>(</span><span class=no>DB</span><span class=p>,</span> <span class=ss>:delete</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>create_db_operation</span><span class=o>.</span><span class=p>(</span><span class=n>maria_record</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>delete_db_operation</span><span class=o>.</span><span class=p>(</span><span class=n>maria_record</span><span class=p>)</span>
</span></span></code></pre></div><p>A nice plus is that working with this small functions your code becomes much easier to test.</p><div id=lazy-evaluation class=anchor></div><h3 class="relative group">Lazy evaluation
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#lazy-evaluation aria-label=Anchor>#</a></span></h3><p>First of all, I encourage to check this <a href=http://patshaughnessy.net/2013/4/3/ruby-2-0-works-hard-so-you-can-be-lazy target=_blank>blog post</a> from Pat Shaughnessy</p><p>Lazy evaluation allows us to consume data on demand, instead of evaluating everything up front.</p><p>Lets look at some examples:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ruby data-lang=ruby><span class=line><span class=cl><span class=n>range</span> <span class=o>=</span> <span class=mi>1</span><span class=o>..</span><span class=no>Float</span><span class=o>::</span><span class=no>INFINITY</span>
</span></span><span class=line><span class=cl><span class=n>range</span><span class=o>.</span><span class=n>each</span> <span class=p>{</span> <span class=o>|</span><span class=n>x</span><span class=o>|</span> <span class=n>x</span><span class=o>*</span><span class=n>x</span> <span class=p>}</span><span class=o>.</span><span class=n>take</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span> <span class=c1>#=&gt; endless loop!</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Using lazy</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>range</span> <span class=o>=</span> <span class=mi>1</span><span class=o>..</span><span class=no>Float</span><span class=o>::</span><span class=no>INFINITY</span>
</span></span><span class=line><span class=cl><span class=n>range</span><span class=o>.</span><span class=n>lazy</span><span class=o>.</span><span class=n>each</span> <span class=p>{</span> <span class=o>|</span><span class=n>x</span><span class=o>|</span> <span class=n>x</span><span class=o>*</span><span class=n>x</span> <span class=p>}</span><span class=o>.</span><span class=n>take</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span> <span class=c1>#=&gt; [1,4,9,16,25,336,49,64,81,100]</span>
</span></span></code></pre></div><p>Without the <code>lazy</code> it tries to consume all the elements and transform them, ending in an endless loop but the second example uses the lazy evaluation allowing to collect only the data that need.</p><p>This technique is advantageous when we are dealing with an enormous amount of data, and we do not want to transform all of them at once but instead only on demand.</p><div id=type-system class=anchor></div><h3 class="relative group">Type system
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#type-system aria-label=Anchor>#</a></span></h3><p>We all know that ruby is a dynamic language with great introspection capabilities, and doesn&rsquo;t have a type system.</p><p>Probably one of the reasons everyone loves ruby is due to these specifications, where we are allowed to do want we want. But having that freedom of choice, we tend to end with profoundly entangled and error-prone applications.</p><p>I&rsquo;m not saying not to use ruby, but some type system that allows us to have warranties of want sort of data are we working with would be fantastic.</p><p><a href=http://dry-rb.org/gems/dry-types/ target=_blank>Dry-types</a> to the rescue \o/.</p><p>Talking about dry-types would be out of scope for this post and probably requires one itself ðŸ˜‰ but just to let you know: if you are looking for a valuable option for your application, there is one.</p><div id=pure-functions class=anchor></div><h3 class="relative group">Pure functions
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#pure-functions aria-label=Anchor>#</a></span></h3><p>A pure function is a function which:</p><ul><li>Given the same input, will always return the same output.</li><li>Produces no side effects.</li></ul><p>Having pure functions will give us a lot of benefits, the first one that comes to my mind is parallel processing.</p><p>Pure functions are also easy to understand, refactor and move around, making our application less error prone.</p><p>And going to show a straightforward example</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ruby data-lang=ruby><span class=line><span class=cl><span class=k>def</span> <span class=nf>double</span><span class=p>(</span><span class=n>number</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=n>number</span> <span class=o>*</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span></code></pre></div><p>No matter what if we introduce the same input it will return the same output.</p><p>Ruby allow us to have mutable state, so is up to us to change how we write our function in a way that is pure.</p><p>If you have any thoughts or questions, please share and Iâ€™ll be happy to answer in the comments.</p></br></br></div><script>var oid="views_posts/functional-programming-aspects-of-the-ruby-language.md",oid_likes="likes_posts/functional-programming-aspects-of-the-ruby-language.md"</script><script type=text/javascript src=/js/page.min.0e49973b4ad0a382c7c6012d8bff8226316642daabc4f8a20477bd08674f3da6e2fa993bc20ad4f51e7c5bb68e6f913a207a7c4fe37ea0e7b806894afce0a64e.js integrity="sha512-DkmXO0rQo4LHxgEti/+CJjFmQtqrxPiiBHe9CGdPPabi+pk7wgrU9R58W7aOb5E6IHp8T+N+oOe4BolK/OCmTg=="></script></section><footer class="pt-8 max-w-prose print:hidden"><div class=pt-8><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class="flex justify-between pt-3"><span><a class="flex group mr-3" href=/posts/dry-web-roda-for-rails-developers-part_ii-persistence/><span class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400">&larr;</span>
<span class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400">&rarr;</span>
<span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">Dry-web-roda for Rails Developers Part II (Persistence)</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime="2017-07-17 00:00:00 +0000 UTC">17 July 2017</time></span></span></a></span>
<span><a class="flex text-right group ml-3" href=/posts/grpc-tutorial-with-ruby/><span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">Grpc Tutorial with ruby</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime="2018-03-06 00:00:00 +0000 UTC">6 March 2018</time></span></span>
<span class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400">&rarr;</span>
<span class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400">&larr;</span></a></span></div></div></footer></article><div id=top-scroller class="pointer-events-none absolute top-[110vh] bottom-0 w-12 ltr:right-0 rtl:left-0"><a href=#the-top class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 mb-16 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 backdrop-blur hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label="Scroll to top" title="Scroll to top">&uarr;</a></div></main><footer id=site-footer class="py-10 print:hidden"><div class="flex items-center justify-between"><p class="text-sm text-neutral-500 dark:text-neutral-400">&copy;
2023
Gustavo Caso</p><p class="text-xs text-neutral-500 dark:text-neutral-400">Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://gohugo.io/ target=_blank rel="noopener noreferrer">Hugo</a> & <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://blowfish.page/ target=_blank rel="noopener noreferrer">Blowfish</a></p></div><script>mediumZoom(document.querySelectorAll("img:not(.nozoom)"),{margin:24,background:"rgba(0,0,0,0.5)",scrollOffset:0})</script><script type=text/javascript src=/js/process.min.35c1113bcc16c5a59bf031082f9e63822aa95280423881a7847a7ff33a16e6299ce6a840d9ef4e10d947e030a18f3f20359afb2ec0f35967484b9a9360ac3145.js integrity="sha512-NcERO8wWxaWb8DEIL55jgiqpUoBCOIGnhHp/8zoW5imc5qhA2e9OENlH4DChjz8gNZr7LsDzWWdIS5qTYKwxRQ=="></script></footer></div></body></html>